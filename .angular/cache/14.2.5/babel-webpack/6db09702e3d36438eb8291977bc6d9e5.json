{"ast":null,"code":"import { Item } from './../../models/interfaces';\nimport { switchMap, map, filter, debounceTime, catchError, throwError } from 'rxjs';\nimport { LivroVolumeInfo } from 'src/app/models/livroVolumeInfo';\nimport { FormControl } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./../../service/livro.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"../../componentes/livro/livro.component\";\n\nfunction ListaLivrosComponent_div_9_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"app-livro\", 8);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const livro_r5 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"livro\", livro_r5);\n  }\n}\n\nfunction ListaLivrosComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6);\n    i0.ɵɵtemplate(1, ListaLivrosComponent_div_9_div_1_Template, 2, 1, \"div\", 7);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const listaLivros_r3 = ctx.ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", listaLivros_r3);\n  }\n}\n\nfunction ListaLivrosComponent_ng_template_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9)(1, \"h1\", 10);\n    i0.ɵɵtext(2, \"Busque o livro \");\n    i0.ɵɵelement(3, \"br\");\n    i0.ɵɵtext(4, \" que quiser na \");\n    i0.ɵɵelement(5, \"br\");\n    i0.ɵɵtext(6, \" nossa estante!\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(7, \"img\", 11);\n    i0.ɵɵelementEnd();\n  }\n}\n\nconst PAUSA = 300;\nexport class ListaLivrosComponent {\n  //subscription: Subscription\n  //livro: Livro\n  constructor(service) {\n    this.service = service; //listaLivros: Livro[];\n\n    this.campoBusca = new FormControl();\n    this.livrosEncontrados$ = this.campoBusca.valueChanges.pipe(debounceTime(PAUSA), filter(valorDigitado => valorDigitado.length >= 3), switchMap(valorDigitado => this.service.buscar(valorDigitado)), map(items =>\n    /*this.listaLivros = */\n    this.livrosResultadoParaLivros(items)), catchError(erro => {\n      console.log(erro);\n      return throwError(() => new Error('ops, deu ruim!'));\n    }));\n  } // buscarLivros() {\n  //   this.subscription = this.service.buscar(this.campoBusca).subscribe({\n  //     next: (itens) => {\n  //       console.log('requisições ao servidor');\n  //       this.listaLivros = this.livrosResultadoParaLivros(itens);\n  //     },\n  //     // o next pode ser chamado várias vezes dentro de um mesmo observable. Enquanto que o error e o complete só pode ser chamado uma vez cada.\n  //     error: erro => console.error(erro),\n  //     // A notificação 'complete' só vai ser executada quando estiver tudo ok, ou seja, quando cair no 'next'. Se houver algum erro, o subscribe para de ser executado no 'error'.\n  //   })\n  // }\n\n\n  livrosResultadoParaLivros(items) {\n    return items.map(item => {\n      return new LivroVolumeInfo(item);\n    });\n    /* É A MESMA COISA DO CÓDIGO QUE VEM LOGO A SEGUIR. PORÉM NO CÓDIGO DE CIMA USO UMA CLASSE (EM MODELS) PARA FAZER ESSA TRANSFORMAÇÃO */\n    // const livros: Livro[] = []\n    // items.forEach(item => {\n    //   livros.push(this.livro = {\n    //     title: item.volumeInfo?.title,\n    //     authors: item.volumeInfo?.authors,\n    //     publisher: item.volumeInfo?.publisher,\n    //     publishedDate: item.volumeInfo?.publishedDate,\n    //     description: item.volumeInfo?.description,\n    //     previewLink: item.volumeInfo?.previewLink,\n    //     thumbnail: item.volumeInfo?.imageLinks?.thumbnail\n    //   })\n    // })\n    // return livros\n  }\n\n}\n\nListaLivrosComponent.ɵfac = function ListaLivrosComponent_Factory(t) {\n  return new (t || ListaLivrosComponent)(i0.ɵɵdirectiveInject(i1.LivroService));\n};\n\nListaLivrosComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ListaLivrosComponent,\n  selectors: [[\"app-lista-livros\"]],\n  decls: 13,\n  vars: 5,\n  consts: [[1, \"container\"], [1, \"busca\"], [\"type\", \"search\", 3, \"formControl\"], [\"src\", \"assets/imagens/icone-busca.png\", \"alt\", \"Lupa de cor roxa\"], [\"class\", \"container-card\", 4, \"ngIf\", \"ngIfElse\"], [\"telaInicial\", \"\"], [1, \"container-card\"], [4, \"ngFor\", \"ngForOf\"], [3, \"livro\"], [1, \"imagens\"], [1, \"titulo\"], [\"src\", \"../../assets/imagens/ilustracao-estante.png\", \"alt\", \"Ilustra\\u00E7\\u00E3o de uma pessoa em p\\u00E9 ao lado de uma estante com livros e plantas\", 1, \"ilustracao\"]],\n  template: function ListaLivrosComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"section\", 0)(1, \"header\");\n      i0.ɵɵtext(2, \"Que livro voc\\u00EA procura?\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"div\", 1);\n      i0.ɵɵelement(4, \"input\", 2);\n      i0.ɵɵelementStart(5, \"button\");\n      i0.ɵɵelement(6, \"img\", 3);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(7, \"p\");\n      i0.ɵɵtext(8, \"Busque por assunto, autoria, nome...\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(9, ListaLivrosComponent_div_9_Template, 2, 1, \"div\", 4);\n      i0.ɵɵpipe(10, \"async\");\n      i0.ɵɵtemplate(11, ListaLivrosComponent_ng_template_11_Template, 8, 0, \"ng-template\", null, 5, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      const _r1 = i0.ɵɵreference(12);\n\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"formControl\", ctx.campoBusca);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(10, 3, ctx.livrosEncontrados$))(\"ngIfElse\", _r1);\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf, i3.DefaultValueAccessor, i3.NgControlStatus, i3.FormControlDirective, i4.LivroComponent, i2.AsyncPipe],\n  styles: [\"section[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: center;\\n  flex-direction: column;\\n  align-items: center;\\n  min-height: 100%;\\n}\\n\\nheader[_ngcontent-%COMP%] {\\n  color: #6C63FF;\\n  font-style: normal;\\n  font-weight: 600;\\n  font-size: 24px;\\n  line-height: 36px;\\n  margin-top: 76px;\\n  margin-bottom: 5px;\\n  filter: drop-shadow(0px 4px 4px rgba(0, 0, 0, 0.25));\\n  font-family: 'Poppins', sans-serif;\\n}\\n\\nsection[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\\n  width: 588px;\\n  height: 56px;\\n  border: 2px solid #6C63FF;\\n  border-radius: 10px;\\n  outline: 0;\\n  box-sizing: border-box;\\n  top: 220px;\\n  background: url('logo-google.png');\\n  background-repeat: no-repeat;\\n  background-position-y: center;\\n  background-position-x: 4.08%;\\n  font-family: 'Poppins', sans-serif;\\n  font-style: normal;\\n  font-weight: 400;\\n  font-size: 16px;\\n  line-height: 24px;\\n  padding-left: 20px;\\n}\\n\\nsection[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\\n  font-family: 'Poppins';\\n  font-style: normal;\\n  font-weight: 400;\\n  font-size: 16px;\\n  line-height: 24px;\\n  color: #8B8B8B;\\n}\\n\\n.resultados[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: center;\\n  margin-top: 2rem;\\n  font-family: 'Poppins';\\n  font-style: normal;\\n  font-weight: 400;\\n  font-size: 16px;\\n  line-height: 24px;\\n  color: #8B8B8B;\\n}\\n\\n.mensagem-erro[_ngcontent-%COMP%] {\\n  color: #6C63FF;\\n}\\n\\ninput[type='search'][_ngcontent-%COMP%]:focus {\\n  background-image: none;\\n  outline: none;\\n  text-decoration: none;\\n  padding-left: 10px;\\n}\\n\\ninput[type=\\\"search\\\"][_ngcontent-%COMP%]::-webkit-search-decoration, [_ngcontent-%COMP%]::-webkit-search-cancel-button, [_ngcontent-%COMP%]::-webkit-search-results-button, [_ngcontent-%COMP%]::-webkit-search-results-decoration { display: none; }\\n\\nsection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\n  border: none;\\n  text-decoration: none;\\n  background: none;\\n  position: relative;\\n  top: 0.3rem;\\n  right: 50px;\\n}\\n\\n.busca[_ngcontent-%COMP%] {\\n  display: flex;\\n}\\n\\n.teste[_ngcontent-%COMP%] {\\n  cursor:auto;\\n  background-color: orange;\\n  font-family: \\\"Poppins\\\";\\n  font-size: 20px;\\n  cursor: pointer;\\n}\\n\\n.container-card[_ngcontent-%COMP%] {\\n  margin-bottom: 2rem;\\n  display: flex;\\n  flex-wrap: wrap;\\n  justify-content: center;\\n  margin-left: 80px;\\n  margin-right: 80px;\\n}\\n\\n.imagens[_ngcontent-%COMP%] {\\n  display: flex;\\n}\\n\\n.ilustracao[_ngcontent-%COMP%] {\\n  margin-top: 72px;\\n  margin-left: 130px;\\n  margin-right: 64px;\\n}\\n\\n.titulo[_ngcontent-%COMP%] {\\n  margin-top: 72px;\\n  margin-left: 64px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpc3RhLWxpdnJvcy5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsYUFBYTtFQUNiLHVCQUF1QjtFQUN2QixzQkFBc0I7RUFDdEIsbUJBQW1CO0VBQ25CLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLGNBQWM7RUFDZCxrQkFBa0I7RUFDbEIsZ0JBQWdCO0VBQ2hCLGVBQWU7RUFDZixpQkFBaUI7RUFDakIsZ0JBQWdCO0VBQ2hCLGtCQUFrQjtFQUNsQixvREFBb0Q7RUFDcEQsa0NBQWtDO0FBQ3BDOztBQUVBO0VBQ0UsWUFBWTtFQUNaLFlBQVk7RUFDWix5QkFBeUI7RUFDekIsbUJBQW1CO0VBQ25CLFVBQVU7RUFDVixzQkFBc0I7RUFDdEIsVUFBVTtFQUNWLGtDQUF3RDtFQUN4RCw0QkFBNEI7RUFDNUIsNkJBQTZCO0VBQzdCLDRCQUE0QjtFQUM1QixrQ0FBa0M7RUFDbEMsa0JBQWtCO0VBQ2xCLGdCQUFnQjtFQUNoQixlQUFlO0VBQ2YsaUJBQWlCO0VBQ2pCLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLHNCQUFzQjtFQUN0QixrQkFBa0I7RUFDbEIsZ0JBQWdCO0VBQ2hCLGVBQWU7RUFDZixpQkFBaUI7RUFDakIsY0FBYztBQUNoQjs7QUFFQTtFQUNFLGFBQWE7RUFDYix1QkFBdUI7RUFDdkIsZ0JBQWdCO0VBQ2hCLHNCQUFzQjtFQUN0QixrQkFBa0I7RUFDbEIsZ0JBQWdCO0VBQ2hCLGVBQWU7RUFDZixpQkFBaUI7RUFDakIsY0FBYztBQUNoQjs7QUFFQTtFQUNFLGNBQWM7QUFDaEI7O0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsYUFBYTtFQUNiLHFCQUFxQjtFQUNyQixrQkFBa0I7QUFDcEI7O0FBRUE7OztzQ0FHc0MsYUFBYSxFQUFFOztBQUVyRDtFQUNFLFlBQVk7RUFDWixxQkFBcUI7RUFDckIsZ0JBQWdCO0VBQ2hCLGtCQUFrQjtFQUNsQixXQUFXO0VBQ1gsV0FBVztBQUNiOztBQUVBO0VBQ0UsYUFBYTtBQUNmOztBQUVBO0VBQ0UsV0FBVztFQUNYLHdCQUF3QjtFQUN4QixzQkFBc0I7RUFDdEIsZUFBZTtFQUNmLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxtQkFBbUI7RUFDbkIsYUFBYTtFQUNiLGVBQWU7RUFDZix1QkFBdUI7RUFDdkIsaUJBQWlCO0VBQ2pCLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLGFBQWE7QUFDZjs7QUFFQTtFQUNFLGdCQUFnQjtFQUNoQixrQkFBa0I7RUFDbEIsa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0UsZ0JBQWdCO0VBQ2hCLGlCQUFpQjtBQUNuQiIsImZpbGUiOiJsaXN0YS1saXZyb3MuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbInNlY3Rpb24ge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgbWluLWhlaWdodDogMTAwJTtcbn1cblxuaGVhZGVyIHtcbiAgY29sb3I6ICM2QzYzRkY7XG4gIGZvbnQtc3R5bGU6IG5vcm1hbDtcbiAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgZm9udC1zaXplOiAyNHB4O1xuICBsaW5lLWhlaWdodDogMzZweDtcbiAgbWFyZ2luLXRvcDogNzZweDtcbiAgbWFyZ2luLWJvdHRvbTogNXB4O1xuICBmaWx0ZXI6IGRyb3Atc2hhZG93KDBweCA0cHggNHB4IHJnYmEoMCwgMCwgMCwgMC4yNSkpO1xuICBmb250LWZhbWlseTogJ1BvcHBpbnMnLCBzYW5zLXNlcmlmO1xufVxuXG5zZWN0aW9uIGlucHV0IHtcbiAgd2lkdGg6IDU4OHB4O1xuICBoZWlnaHQ6IDU2cHg7XG4gIGJvcmRlcjogMnB4IHNvbGlkICM2QzYzRkY7XG4gIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gIG91dGxpbmU6IDA7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIHRvcDogMjIwcHg7XG4gIGJhY2tncm91bmQ6IHVybCguLi8uLi8uLi9hc3NldHMvaW1hZ2Vucy9sb2dvLWdvb2dsZS5wbmcpO1xuICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O1xuICBiYWNrZ3JvdW5kLXBvc2l0aW9uLXk6IGNlbnRlcjtcbiAgYmFja2dyb3VuZC1wb3NpdGlvbi14OiA0LjA4JTtcbiAgZm9udC1mYW1pbHk6ICdQb3BwaW5zJywgc2Fucy1zZXJpZjtcbiAgZm9udC1zdHlsZTogbm9ybWFsO1xuICBmb250LXdlaWdodDogNDAwO1xuICBmb250LXNpemU6IDE2cHg7XG4gIGxpbmUtaGVpZ2h0OiAyNHB4O1xuICBwYWRkaW5nLWxlZnQ6IDIwcHg7XG59XG5cbnNlY3Rpb24gcCB7XG4gIGZvbnQtZmFtaWx5OiAnUG9wcGlucyc7XG4gIGZvbnQtc3R5bGU6IG5vcm1hbDtcbiAgZm9udC13ZWlnaHQ6IDQwMDtcbiAgZm9udC1zaXplOiAxNnB4O1xuICBsaW5lLWhlaWdodDogMjRweDtcbiAgY29sb3I6ICM4QjhCOEI7XG59XG5cbi5yZXN1bHRhZG9zIHtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIG1hcmdpbi10b3A6IDJyZW07XG4gIGZvbnQtZmFtaWx5OiAnUG9wcGlucyc7XG4gIGZvbnQtc3R5bGU6IG5vcm1hbDtcbiAgZm9udC13ZWlnaHQ6IDQwMDtcbiAgZm9udC1zaXplOiAxNnB4O1xuICBsaW5lLWhlaWdodDogMjRweDtcbiAgY29sb3I6ICM4QjhCOEI7XG59XG5cbi5tZW5zYWdlbS1lcnJvIHtcbiAgY29sb3I6ICM2QzYzRkY7XG59XG5cbmlucHV0W3R5cGU9J3NlYXJjaCddOmZvY3VzIHtcbiAgYmFja2dyb3VuZC1pbWFnZTogbm9uZTtcbiAgb3V0bGluZTogbm9uZTtcbiAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xuICBwYWRkaW5nLWxlZnQ6IDEwcHg7XG59XG5cbmlucHV0W3R5cGU9XCJzZWFyY2hcIl06Oi13ZWJraXQtc2VhcmNoLWRlY29yYXRpb24sXG46Oi13ZWJraXQtc2VhcmNoLWNhbmNlbC1idXR0b24sXG46Oi13ZWJraXQtc2VhcmNoLXJlc3VsdHMtYnV0dG9uLFxuOjotd2Via2l0LXNlYXJjaC1yZXN1bHRzLWRlY29yYXRpb24geyBkaXNwbGF5OiBub25lOyB9XG5cbnNlY3Rpb24gYnV0dG9uIHtcbiAgYm9yZGVyOiBub25lO1xuICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG4gIGJhY2tncm91bmQ6IG5vbmU7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgdG9wOiAwLjNyZW07XG4gIHJpZ2h0OiA1MHB4O1xufVxuXG4uYnVzY2Ege1xuICBkaXNwbGF5OiBmbGV4O1xufVxuXG4udGVzdGUge1xuICBjdXJzb3I6YXV0bztcbiAgYmFja2dyb3VuZC1jb2xvcjogb3JhbmdlO1xuICBmb250LWZhbWlseTogXCJQb3BwaW5zXCI7XG4gIGZvbnQtc2l6ZTogMjBweDtcbiAgY3Vyc29yOiBwb2ludGVyO1xufVxuXG4uY29udGFpbmVyLWNhcmQge1xuICBtYXJnaW4tYm90dG9tOiAycmVtO1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LXdyYXA6IHdyYXA7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBtYXJnaW4tbGVmdDogODBweDtcbiAgbWFyZ2luLXJpZ2h0OiA4MHB4O1xufVxuXG4uaW1hZ2VucyB7XG4gIGRpc3BsYXk6IGZsZXg7XG59XG5cbi5pbHVzdHJhY2FvIHtcbiAgbWFyZ2luLXRvcDogNzJweDtcbiAgbWFyZ2luLWxlZnQ6IDEzMHB4O1xuICBtYXJnaW4tcmlnaHQ6IDY0cHg7XG59XG5cbi50aXR1bG8ge1xuICBtYXJnaW4tdG9wOiA3MnB4O1xuICBtYXJnaW4tbGVmdDogNjRweDtcbn1cblxuXG5cblxuXG5cblxuXG5cblxuIl19 */\"]\n});","map":{"version":3,"mappings":"AAAA,SAAiCA,IAAjC,QAA6C,2BAA7C;AAGA,SAAuBC,SAAvB,EAAkCC,GAAlC,EAAuCC,MAAvC,EAA+CC,YAA/C,EAA6DC,UAA7D,EAAyEC,UAAzE,QAA2F,MAA3F;AAEA,SAASC,eAAT,QAAgC,gCAAhC;AACA,SAASC,WAAT,QAA4B,gBAA5B;;;;;;;;;ICOEC;IACEA;IACFA;;;;;IADaA;IAAAA;;;;;;IAFfA;IACEA;IAGFA;;;;;IAHyBA;IAAAA;;;;;;IAKvBA,+BAAqB,CAArB,EAAqB,IAArB,EAAqB,EAArB;IACqBA;IAAeA;IAAKA;IAAcA;IAAKA;IAAcA;IACxEA;IAIFA;;;;ADhBF,MAAMC,KAAK,GAAW,GAAtB;AAOA,OAAM,MAAOC,oBAAP,CAA2B;EAI/B;EACA;EAEAC,YAAoBC,OAApB,EAAyC;IAArB,uBAAqB,CALzC;;IACA,kBAAa,IAAIL,WAAJ,EAAb;IAMA,0BAAqB,KAAKM,UAAL,CAAgBC,YAAhB,CAClBC,IADkB,CAEjBZ,YAAY,CAACM,KAAD,CAFK,EAGjBP,MAAM,CAAEc,aAAD,IAAmBA,aAAa,CAACC,MAAd,IAAwB,CAA5C,CAHW,EAIjBjB,SAAS,CAAEgB,aAAD,IAAmB,KAAKJ,OAAL,CAAaM,MAAb,CAAoBF,aAApB,CAApB,CAJQ,EAKjBf,GAAG,CAAEkB,KAAD;IAAW;IAAwB,KAAKC,yBAAL,CAA+BD,KAA/B,CAApC,CALc,EAMjBf,UAAU,CAACiB,IAAI,IAAG;MAChBC,OAAO,CAACC,GAAR,CAAYF,IAAZ;MACA,OAAOhB,UAAU,CAAC,MAAM,IAAImB,KAAJ,CAAU,gBAAV,CAAP,CAAjB;IACD,CAHS,CANO,CAArB;EAF8C,CAPf,CAqB/B;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;;;EAEAJ,yBAAyB,CAACD,KAAD,EAAc;IACrC,OAAOA,KAAK,CAAClB,GAAN,CAAUwB,IAAI,IAAG;MACtB,OAAO,IAAInB,eAAJ,CAAoBmB,IAApB,CAAP;IACD,CAFM,CAAP;IAIA;IACA;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAEA;EACD;;AAvD8B;;;mBAApBf,sBAAoBF;AAAA;;;QAApBE;EAAoBgB;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCfjCtB,mCAA2B,CAA3B,EAA2B,QAA3B;MACUA;MAAuBA;MAC/BA;MACEA;MAIAA;MACEA;MACFA;MAEFA;MAAGA;MAAoCA;MACzCA;;MAKAA;MAjBAA;;;;;;MAKMA;MAAAA;MAOuBA;MAAAA,qEAAiC,UAAjC,EAAiCuB,GAAjC","names":["Item","switchMap","map","filter","debounceTime","catchError","throwError","LivroVolumeInfo","FormControl","i0","PAUSA","ListaLivrosComponent","constructor","service","campoBusca","valueChanges","pipe","valorDigitado","length","buscar","items","livrosResultadoParaLivros","erro","console","log","Error","item","selectors","decls","vars","consts","template","_r1"],"sourceRoot":"","sources":["C:\\Users\\nsfge\\OneDrive\\Documentos\\ws-angular\\alura\\RxJS e Angular - programando de forma reativa\\2685-angular-rxjs-projeto-base\\src\\app\\views\\lista-livros\\lista-livros.component.ts","C:\\Users\\nsfge\\OneDrive\\Documentos\\ws-angular\\alura\\RxJS e Angular - programando de forma reativa\\2685-angular-rxjs-projeto-base\\src\\app\\views\\lista-livros\\lista-livros.component.html"],"sourcesContent":["import { VolumeInfo, ImageLinks, Item } from './../../models/interfaces';\nimport { LivroService } from './../../service/livro.service';\nimport { Component, OnDestroy } from '@angular/core';\nimport { Subscription, switchMap, map, filter, debounceTime, catchError, throwError } from 'rxjs';\nimport { Livro } from 'src/app/models/interfaces';\nimport { LivroVolumeInfo } from 'src/app/models/livroVolumeInfo';\nimport { FormControl } from '@angular/forms';\n\nconst PAUSA: number = 300;\n\n@Component({\n  selector: 'app-lista-livros',\n  templateUrl: './lista-livros.component.html',\n  styleUrls: ['./lista-livros.component.css']\n})\nexport class ListaLivrosComponent {\n\n  //listaLivros: Livro[];\n  campoBusca = new FormControl();\n  //subscription: Subscription\n  //livro: Livro\n\n  constructor(private service: LivroService) { }\n\n  livrosEncontrados$ = this.campoBusca.valueChanges\n    .pipe(\n      debounceTime(PAUSA),\n      filter((valorDigitado) => valorDigitado.length >= 3),\n      switchMap((valorDigitado) => this.service.buscar(valorDigitado)),\n      map((items) => /*this.listaLivros = */ this.livrosResultadoParaLivros(items)),\n      catchError(erro => {\n        console.log(erro)\n        return throwError(() => new Error('ops, deu ruim!'))\n      })\n    )\n\n  // buscarLivros() {\n  //   this.subscription = this.service.buscar(this.campoBusca).subscribe({\n  //     next: (itens) => {\n  //       console.log('requisições ao servidor');\n  //       this.listaLivros = this.livrosResultadoParaLivros(itens);\n  //     },\n  //     // o next pode ser chamado várias vezes dentro de um mesmo observable. Enquanto que o error e o complete só pode ser chamado uma vez cada.\n  //     error: erro => console.error(erro),\n  //     // A notificação 'complete' só vai ser executada quando estiver tudo ok, ou seja, quando cair no 'next'. Se houver algum erro, o subscribe para de ser executado no 'error'.\n\n  //   })\n  // }\n\n  livrosResultadoParaLivros(items: Item[]): LivroVolumeInfo[] {\n    return items.map(item => {\n      return new LivroVolumeInfo(item)\n    })\n\n    /* É A MESMA COISA DO CÓDIGO QUE VEM LOGO A SEGUIR. PORÉM NO CÓDIGO DE CIMA USO UMA CLASSE (EM MODELS) PARA FAZER ESSA TRANSFORMAÇÃO */\n    // const livros: Livro[] = []\n\n    // items.forEach(item => {\n    //   livros.push(this.livro = {\n    //     title: item.volumeInfo?.title,\n    //     authors: item.volumeInfo?.authors,\n    //     publisher: item.volumeInfo?.publisher,\n    //     publishedDate: item.volumeInfo?.publishedDate,\n    //     description: item.volumeInfo?.description,\n    //     previewLink: item.volumeInfo?.previewLink,\n    //     thumbnail: item.volumeInfo?.imageLinks?.thumbnail\n    //   })\n    // })\n\n    // return livros\n  }\n\n  // Método para me desinscrever do Observable. Uso o ciclo de vida do Angular (ngOnDestroy). É uma boa pratica sempre me inscrever e após fazer o que preciso me desinscrever para liberar recursos e evitar vazamento de memória.\n  // ngOnDestroy(): void {\n  //   this.subscription.unsubscribe();\n  // }\n\n}\n\n\n\n","<section class=\"container\">\n  <header>Que livro você procura?</header>\n  <div class=\"busca\">\n    <input\n      type=\"search\"\n      [formControl]=\"campoBusca\"\n    >\n    <button >\n      <img src=\"assets/imagens/icone-busca.png\" alt=\"Lupa de cor roxa\">\n    </button>\n  </div>\n  <p>Busque por assunto, autoria, nome...</p>\n<div class=\"container-card\" *ngIf=\"livrosEncontrados$ | async as listaLivros, else telaInicial\">\n  <div *ngFor=\"let livro of listaLivros\">\n    <app-livro [livro]=\"livro\"></app-livro>\n  </div>\n</div>\n<ng-template #telaInicial>\n  <div class=\"imagens\">\n    <h1 class=\"titulo\">Busque o livro <br> que quiser na <br> nossa estante!</h1>\n    <img\n      class=\"ilustracao\"\n      src=\"../../assets/imagens/ilustracao-estante.png\"\n      alt=\"Ilustração de uma pessoa em pé ao lado de uma estante com livros e plantas\">\n  </div>\n</ng-template>\n"]},"metadata":{},"sourceType":"module"}